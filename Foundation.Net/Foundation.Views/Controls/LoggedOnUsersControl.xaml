<UserControl
    x:Class="Foundation.Views.LoggedOnUsersControl"
    Name="ThisControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    
    xmlns:controls="clr-namespace:Foundation.Views"
    xmlns:fdc="clr-namespace:Foundation.Common.DataColumns;assembly=Foundation.Common"
    xmlns:fEnums="clr-namespace:Foundation.Interfaces;assembly=Foundation.Interfaces"

    mc:Ignorable="d" 
    d:DesignHeight="300" d:DesignWidth="1000"
    >
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
        <Style TargetType="{x:Type DataGridRowHeader}">
            <Setter Property="FontSize" Value="{DynamicResource SmallContentFontSize}"/>
        </Style>

        <Style TargetType="{x:Type DataGridCell}">
            <Setter Property="FontSize" Value="{DynamicResource SmallContentFontSize}"/>
            <Style.Triggers>
                <!--<DataTrigger Binding="{Binding {x:Static fdc:LoggedOnUser.RoleId}}" Value="{x:Static fEnums:ApplicationRole.SystemAdministrator}">-->

                <DataTrigger Binding="{Binding Path={x:Static fdc:LoggedOnUser.RoleId}}" Value="{x:Static fEnums:ApplicationRole.SystemAdministrator}">
                    <Setter Property="Background" Value="{DynamicResource SystemAdministratorBackgroundColour}"/>
                    <Setter Property="Foreground" Value="{DynamicResource SystemAdministratorForegroundColour}"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding {x:Static fdc:LoggedOnUser.RoleId}}" Value="{x:Static fEnums:ApplicationRole.SystemSupervisor}">
                    <Setter Property="Background" Value="{DynamicResource SystemSupervisorBackgroundColour}"/>
                    <Setter Property="Foreground" Value="{DynamicResource SystemSupervisorForegroundColour}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <ToolBar x:Key="LouAdminCommands">
            <ToolBar.Resources>
                <Style TargetType="{x:Type Button}">
                    <Setter Property="FontFamily" Value="{DynamicResource DefaultFixedFontFamily}"/>
                    <Setter Property="FontSize" Value="{DynamicResource SmallHeaderFontSize}" />
                </Style>
            </ToolBar.Resources>
            <controls:ButtonControl
                Content="Send Quit Command"
                Command="{Binding SendQuitCommandCommand}"
                CommandParameter="{Binding Path=SelectedItem, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type controls:GridViewControl}}}"
                Visibility="{Binding Path=IsSystemSupport, Converter={StaticResource BoolToVis}}"
            />
            <controls:ButtonControl
                Content="Send Abort Command"
                Command="{Binding SendAbortCommandCommand}"
                CommandParameter="{Binding Path=SelectedItem, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type controls:GridViewControl}}}"
                Visibility="{Binding Path=IsSystemSupport, Converter={StaticResource BoolToVis}}"
            />
            <controls:ButtonControl
                Content="Send Message"
                Command="{Binding SendMessageCommandCommand}"
                CommandParameter="{Binding Path=SelectedItem, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type controls:GridViewControl}}}"
                Visibility="{Binding Path=IsSystemSupport, Converter={StaticResource BoolToVis}}"
            />
        </ToolBar>
    </UserControl.Resources>

    <controls:StdWindowPanel>
        <controls:StdWindowPanel.Workspace>
            <controls:GridViewControl
                DataSource="{Binding GridDataSource}"
                DisplayTarget="Admin"
                RefreshButtonVisibility="{Binding RefreshButtonVisibility}"
                RefreshCommand="{Binding RefreshCommand}"
                GridColumns="{Binding DataGridColumns}"
                CustomToolbar="{DynamicResource LouAdminCommands}"
                ExportGridToExcelCommand="{Binding ExportGridToExcelCommand}"
                ExportGridToCsvCommand="{Binding ExportGridToCsvCommand}"
                >
            </controls:GridViewControl>
        </controls:StdWindowPanel.Workspace>
    </controls:StdWindowPanel>
</UserControl>
