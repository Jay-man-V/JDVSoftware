<ListBox
    x:Class="Foundation.Views.ListBoxControl"
    Name="ThisControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

    mc:Ignorable="d"
    
    xmlns:foundation="clr-namespace:Foundation.Interfaces;assembly=Foundation.Interfaces"
    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"

    HorizontalAlignment="{Binding ElementName=ThisControl, Path=HorizontalAlignment}"
    VerticalAlignment="{Binding ElementName=ThisControl, Path=VerticalAlignment}"
    d:DesignHeight="150" d:DesignWidth="150"
    >

    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="FontWeight" Value="Bold" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </ListBox.ItemContainerStyle>

    <b:Interaction.Triggers>
        <b:EventTrigger EventName="SelectionChanged">
            <b:InvokeCommandAction
                Command="{Binding MenuSelectedItemChanged}"
                CommandParameter="{Binding ElementName=ThisControl, Path=SelectedItem}"/>
        </b:EventTrigger>
    </b:Interaction.Triggers>

        <ListBox.ItemTemplate>
            <DataTemplate
                DataType="{x:Type foundation:IMenuItem}"
                >
                <TextBlock x:Name="displayItem" Text="{Binding Caption}" ToolTip="{Binding HelpText}">
                    <TextBlock.InputBindings>
                        <MouseBinding
                            MouseAction="LeftClick"
                            Command="{Binding ElementName=ThisControl, Path=LeftClickCommand}"
                            CommandParameter="{Binding .}" />
                        <!--ElementName=thisControl, Path=LeftClickCommandParameter-->
                        <MouseBinding
                            MouseAction="RightClick"
                            Command="{Binding ElementName=ThisControl, Path=RightClickCommand}"
                            CommandParameter="{Binding .}" />
                        <!--ElementName=thisControl, Path=RightClickCommandParameter-->
                    </TextBlock.InputBindings>
                </TextBlock>
            </DataTemplate>
        </ListBox.ItemTemplate>
    <ListBox.Resources>
    </ListBox.Resources>
</ListBox>
